<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>HTML Runner</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
html, body {
  margin: 0;
  height: 100%;
  overflow: hidden; /* ★全体スクロール禁止 */
}

body {
  display: flex;
  flex-direction: column;
  background: #111;
  color: #fff;
}

/* 操作バー */
#controls {
  flex-shrink: 0;
  padding: 6px;
  background: #222;
}

/* メイン */
#main {
  flex: 1;
  display: flex;
  overflow: hidden;
}

/* エディターだけスクロール可 */
textarea {
  width: 40%;
  resize: none;
  font-family: monospace;
  overflow: auto;
}

/* プレビュー */
iframe {
  width: 60%;
  border: none;
  background: #000;
}

/* ===== 全画面モード ===== */
body.fullscreen #controls,
body.fullscreen textarea {
  display: none;
}

body.fullscreen iframe {
  width: 100%;
  height: 100%;
}
</style>
</head>
<body>

<div id="controls">
  <button onclick="run()">実行</button>
  <button onclick="enterFullscreen()">全画面</button>
</div>

<div id="main">
  <textarea id="editor"></textarea>
  <iframe id="preview" sandbox="allow-scripts allow-pointer-lock"></iframe>
</div>

<script>
let currentURL;

function run() {
  const code = editor.value;
  const blob = new Blob([code], { type: "text/html" });
  if (currentURL) URL.revokeObjectURL(currentURL);
  currentURL = URL.createObjectURL(blob);
  preview.src = currentURL;
}

function enterFullscreen() {
  document.body.classList.add("fullscreen");

  // iframe自体を全画面化
  if (preview.requestFullscreen) {
    preview.requestFullscreen();
  } else if (preview.webkitRequestFullscreen) {
    preview.webkitRequestFullscreen(); // iOS
  }
}

// Escなどで全画面解除された時にUIを戻す
document.addEventListener("fullscreenchange", () => {
  if (!document.fullscreenElement) {
    document.body.classList.remove("fullscreen");
  }
});
document.addEventListener("webkitfullscreenchange", () => {
  if (!document.webkitFullscreenElement) {
    document.body.classList.remove("fullscreen");
  }
});
</script>

</body>
</html>
